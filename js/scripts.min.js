var Data={sources:["http://localhost:8888/fredcave/projects/the-electronic-cottage/","http://localhost:8888/fredcave/projects/dogwood-ii/","http://localhost:8888/fredcave/projects/once-removed/","http://localhost:8888/fredcave/projects/night-light-1/","http://localhost:8888/fredcave/projects/night-light-2/","http://localhost:8888/fredcave/projects/night-light-3/","http://localhost:8888/fredcave/projects/all-that-is-solid/","http://localhost:8888/fredcave/projects/narcissus-dissolve/","http://localhost:8888/fredcave/projects/the-wake-of-dust/","http://localhost:8888/fredcave/projects/eden-book/"],nextLayer:1,hyperLinkVisible:!1,sidebarText:!1,currentTextBlock:0},Page={init:function(){console.log("Page.init"),this.bindEvents(),this.nextLayerInit()},bindEvents:function(){console.log("Page.bindEvents"),$("#hyperlink").on("mouseover",function(){Page.nextFadeIn()}).on("mouseout",function(){Page.nextFadeOut()}).on("click",function(){Page.layerLoad()}),$("#close_button").on("click",function(){Page.infoReset()}),$("#squiggle").on("click",function(){Page.sidebarToggle()})},infoReset:function(){console.log("Page.infoReset"),$("#home_wrapper").fadeIn(1e3),$("#close_button").fadeOut(1e3),$(".layer").css({opacity:0})},nextLayerInit:function(){console.log("Page.nextLayerInit");var a=Math.floor(Math.random()*Data.sources.length),b=Data.sources[a];console.log(50,b);var c=Data.nextLayer,d=$(".layer").eq(c-1).find("iframe");d.attr("src",b),d.on("load",function(){console.log(120,"iframe loaded"),Page.placeHyperLink()})},placeHyperLink:function(){console.log("Page.placeHyperLink"),Data.hyperLinkVisible||this.placeHyperLinkFirstTime()},placeHyperLinkFirstTime:function(){console.log("Page.placeHyperLinkFirstTime");var a,b,c=2*Math.random()*1e3+2e3,d=[["top_left","top","left"],["top_right","top","right"],["bottom_right","bottom","right"],["bottom_left","bottom","left"]],e=Math.ceil(4*Math.random())-1,f=Math.floor(2*Math.random())+1,g=3-f,h="50px",i=Math.random()*$(window).height()*.8;switch($("#hyperlink").addClass(d[e][0]),e){case 0:a=d[e][f],b=d[e][g];break;case 1:a=d[e][f],b=d[e][g];break;case 2:a=d[e][f],b=d[e][g];break;case 3:a=d[e][f],b=d[e][g]}setTimeout(function(){$("#hyperlink").css(a,h),$("#hyperlink").css(b,i)},c)},nextFadeIn:function(){console.log("Page.nextFadeIn");var a=$(".layer").eq(Data.nextLayer-1);a.css({opacity:.5})},nextFadeOut:function(){console.log("Page.nextFadeOut");var a=$(".layer").eq(Data.nextLayer-1);a.css({opacity:""})},closeButtonCheck:function(){console.log("Page.closeButtonCheck"),$("#close_button").is(":visible")||$("#close_button").fadeIn()},layerLoad:function(){console.log("Page.layerLoad");var a=$(".layer").eq(Data.nextLayer-1);a.css({opacity:1}),Data.nextLayer=1===Data.nextLayer?2:1,this.closeButtonCheck(),$("#home_wrapper").fadeOut(1e3),this.nextLayerInit()},sidebarToggle:function(){console.log("Page.sidebarToggle"),$("#sidebar").hasClass("visible")?$("#sidebar").css({right:""}).removeClass("visible"):($("#sidebar").css({right:0}).addClass("visible"),Data.sidebarText||this.textInit())},textInit:function(){console.log("Page.textInit");var a;$("#text_wrapper").append("<div class='text_block'><p class='loading'>Receiving</p></div>"),setTimeout(function(){$.ajax({url:"wp-json/wp/v2/projects/112",success:function(b){a=Page.textParse(b.acf.project_texts[0].project_text),Page.conversation(a,0)}})},2e3)},parseForBot:function(a){return console.log("Page.parseForBot",a),str=a.replace(" ","+"),str},conversation:function(a,b){console.log("Page.conversation");var c="<div class='text_block'>"+textArray[Data.currentTextBlock]+"</div>";$("#text_wrapper").append(c),0===Data.currentTextBlock&&setTimeout(function(){Page.hideFirstBlock()},500),cleanText=textArray[Data.currentTextBlock].replace(/<\/?[^>]+(>|$)/g,""),console.log(283,Page.parseForBot(cleanText)),setTimeout(function(){$.ajax({method:"GET",dataType:"text",url:"http://www.botlibre.com/rest/botlibre/form-chat?application=4581146104707647883&instance=15464920&message="+Page.parseForBot(cleanText),success:function(b){console.log(300,b);var c=$.parseXML(b),d=$(c).find("message").html(),e="<div class='text_block'><p>"+d+"</p></div>";$("#text_wrapper").append(e),Page.heightChecker(),Data.currentTextBlock++,Page.conversation(a,Data.currentTextBlock)}})},2e3)},heightChecker:function(){console.log("Page.heightChecker");var a=$("#sidebar").height(),b=$("#text_wrapper").height();b>.5*a&&Page.hideFirstBlock()},textParse:function(a){return console.log("Page.textParse"),textArray=a.split("\n"),textArray},hideFirstBlock:function(){console.log("Page.hideFirstBlock");var a=$("#text_wrapper .text_block").eq(0),b=2*a.height();a.find("p").css({transform:"translateY(-"+b+"px)"}),setTimeout(function(){$("#text_wrapper .text_block").eq(0).slideUp(500),setTimeout(function(){$("#text_wrapper .text_block").eq(0).remove()},500)},500)},textInject:function(a){console.log("Page.textInject",Data.currentTextBlock)}};$(document).ready(function(){$(window).on("load",function(){Page.init()})});